<?xml version="1.0" encoding="UTF-8"?>

<PlanDefinition xmlns="http://hl7.org/fhir">
  <id value="ANCDT25"/>
  <text>
    <status value="extensions"/><div xmlns="http://www.w3.org/1999/xhtml">
<div>
    <table class="grid dict">
        
        <tr>
            <th scope="row"><b>Id: </b></th>
            <td style="padding-left: 4px;">ANCDT25</td>
        </tr>
        

        
        <tr>
            <th scope="row"><b>Url: </b></th>
            <td style="padding-left: 4px;"><a href="PlanDefinition-ANCDT25.html">ANC.DT.25 Anaemia, iron and folic acid supplementation</a></td>
        </tr>
        

        
        <tr>
            <th scope="row"><b>Version: </b></th>
            <td style="padding-left: 4px;">0.3.0</td>
        </tr>
        

        
        <tr>
            <th scope="row">
                <b>
                    
                        Official
                    
                </b>
            </th>
            <td style="padding-left: 4px;">
                
                <p style="margin-bottom: 5px;">
                    <span>ANC.DT.25</span>
                </p>
                
            </td>
        </tr>
        

        
        <tr>
            <th scope="row"><b>Title: </b></th>
            <td style="padding-left: 4px;">ANC.DT.25 Anaemia, iron and folic acid supplementation</td>
        </tr>
        

        

        

        

        
        <tr>
            <th scope="row"><b>Type: </b></th>
            <td style="padding-left: 4px;">
                
                    
                        
                        <p style="margin-bottom: 5px;">
                            <b>system: </b> <span><a href="http://terminology.hl7.org/6.4.0/CodeSystem-plan-definition-type.html">http://terminology.hl7.org/CodeSystem/plan-definition-type</a></span>
                        </p>
                        
                        
                        <p style="margin-bottom: 5px;">
                            <b>code: </b> <span>eca-rule</span>
                        </p>
                        
                        
                    
                
                
            </td>
        </tr>
        

        

        
        <tr>
            <th scope="row"><b>Date: </b></th>
            <td style="padding-left: 4px;">2025-06-24 13:58:48-0600</td>
        </tr>
        

        
        <tr>
            <th scope="row"><b>Publisher: </b></th>
            <td style="padding-left: 4px;">World Health Organization (WHO)</td>
        </tr>
        

        
        <tr>
            <th scope="row"><b>Description: </b></th>
            <td style="padding-left: 4px;"><div><p>Testing for anaemia is recommended for all pregnant women. Regardless of test results, iron and folic acid supplementation is recommended. The amount of iron and folic acid supplementation will vary depending on anaemia diagnosis, population prevalence of anaemia, and whether the woman has side-effects due to iron and folic acid supplementation.</p>
</div></td>
        </tr>
        

        

        

        
        <tr>
            <th scope="row"><b>Use Context: </b></th>
            <td style="padding-left: 4px;">
                <table class="grid-dict">
                    <tr>
                        <th><b>code</b></th>
                        <th><b>value</b></th>
                    </tr>
                    
                        <tr>
                            <td>task</td>
                            <td/>
                        </tr>
                    
                </table>
            </td>
        </tr>
        

        
        <tr>
            <th scope="row"><b>Jurisdiction: </b></th>
            <td style="padding-left: 4px;">001</td>
        </tr>
        

        

        

        

        

        

        

        

        
        <tr>
            <th scope="row"><b>Libraries: </b></th>
            <td style="padding-left: 4px;">
                <table class="grid-dict">
                    
                    <tr>
                        <td><a href="Library-ANCDT25.html">ANC.DT.25 Anaemia, iron and folic acid supplementation</a></td>
                    </tr>
                    
                </table>
            </td>
        </tr>
        

        
        <tr>
            <th scope="row"><b>Actions: </b></th>
            <td style="padding-left: 4px;">
                <table class="grid-dict">
                    
                    <tr>
                        <td>
                            
                            <b> ANC.DT.25 Anaemia, iron and folic acid supplementation:</b> 
                            
                            <br/>
                            
                            <b>When:</b>
                            
                            <i>Named Event:</i> ANC.B9. Conduct laboratory tests and imaging
                            <br/>
                            
                            
                            
                            
                            <b>Then:</b>
                            <table class="grid-dict">
                                
                                <tr>
                                    <td>
                                        
                                        Anaemia can be diagnosed if Hb level is less than 11 in first or third trimester or Hb level less than 10.5 in second trimester; OR there is no Hb test result recorded, but woman has pallor.

If a woman is diagnosed with anaemia during pregnancy, conduct counselling for managing and treating anaemia. 

Her daily elemental iron should be increased to 120 mg until her haemoglobin (Hb) concentration rises to normal (Hb 110 g/L or higher). Thereafter, she can resume the standard daily antenatal iron dose to prevent recurrence of anaemia.

The equivalent of 120 mg of elemental iron equals 600 mg of ferrous sulfate heptahydrate, 360 mg of ferrous fumarate or 1000 mg of ferrous gluconate.

Please refer to iron sources listed below for additional guidance that can be provided. 
                                        
                                        <br/>
                                        
                                        
                                        <b>If:</b>
                                        
                                        <i>Applicability:</i>
                                        
                                        ((((&quot;Blood haemoglobin test result&quot; &lt; 110 g/L)
  AND (&quot;Gestational age&quot; ≤ 12 weeks))
  OR ((&quot;Blood haemoglobin test result&quot; &lt; 110 g/L)
  AND (&quot;Gestational age&quot; ≥ 28 weeks)))
  OR ((&quot;Blood haemoglobin test result&quot; &lt; 105 g/L)
  AND (13 weeks ≤ &quot;Gestational age&quot; ≤ 27 weeks)))
  OR ((&quot;Blood haemoglobin test conducted&quot; = FALSE)
  AND (&quot;Pallor present&quot; = TRUE))
                                        
                                        <i>(Should Conduct REQUIRED anaemia counselling)</i>
                                        <br/>
                                        
                                        
                                        
                                        <b>Then:</b> <i>Additional sub-actions not displayed</i>
                                        
                                    </td>
                                </tr>
                                
                                <tr>
                                    <td>
                                        
                                        If a woman is not diagnosed for anaemia, iron and folic acid supplementation is still recommended. 

Due to the population's high anaemia prevalence, a daily dose of 60 mg of elemental iron is preferred over a lower dose. A daily dose of 400 micrograms (0.4 mg) folic acid is also recommended.

The equivalent of 60 mg of elemental iron is 300 mg of ferrous sulfate heptahydrate, 180 mg of ferrous fumarate or 500 mg of ferrous gluconate.

Please refer to iron sources listed below for additional guidance that can be provided. 
                                        
                                        <br/>
                                        
                                        
                                        <b>If:</b>
                                        
                                        <i>Applicability:</i>
                                        
                                        ((((&quot;Blood haemoglobin test result&quot; ≥ 110 g/L)
  AND (&quot;Gestational age&quot; ≤ 12 weeks)
  AND (&quot;Population prevalence of anaemia&quot; ≥ 40%))
  OR ((&quot;Blood haemoglobin test result&quot; ≥ 110 g/L)
  AND (&quot;Gestational age&quot; ≥ 28 weeks)
  AND (&quot;Population prevalence of anaemia&quot; ≥ 40%)))
  OR ((&quot;Blood haemoglobin test result&quot; ≥ 105 g/L)
  AND (13 weeks ≤ &quot;Gestational age&quot; ≤ 27 weeks)
  AND (&quot;Population prevalence of anaemia&quot; ≥ 40%)))
  OR ((&quot;Blood haemoglobin test conducted&quot; = FALSE)
  AND (&quot;Pallor present&quot; = FALSE)
  AND (&quot;Population prevalence of anaemia&quot; ≥ 40%))
                                        
                                        <i>(Should \&quot;Anaemia counselling conducted\&quot; IS OPTIONAL)</i>
                                        <br/>
                                        
                                        
                                        
                                        <b>Then:</b> <i>Additional sub-actions not displayed</i>
                                        
                                    </td>
                                </tr>
                                
                                <tr>
                                    <td>
                                        
                                        If a woman is not diagnosed for anaemia, iron and folic acid supplementation is still recommended. 

Daily oral iron and folic acid supplementation with 30–60 mg of elemental iron and 400 micrograms (0.4 mg) of folic acidc to prevent maternal anaemia, puerperal sepsis, low birth weight and preterm birth.

The equivalent of 60 mg of elemental iron is 300 mg of ferrous sulfate hepahydrate, 180 mg of ferrous fumarate or 500 mg of ferrous gluconate.

Please refer to iron sources listed below for additional guidance that can be provided. 
                                        
                                        <br/>
                                        
                                        
                                        <b>If:</b>
                                        
                                        <i>Applicability:</i>
                                        
                                        ((((&quot;Blood haemoglobin test result&quot; ≥ 110 g/L)
  AND (&quot;Gestational age&quot; ≤ 12 weeks)
  AND (&quot;Population prevalence of anaemia&quot; ≤ 20%)
  AND (&quot;Has side-effects from iron and folic acid supplements&quot; = TRUE))
  OR ((&quot;Blood haemoglobin test result&quot; ≥ 110 g/L)
  AND (&quot;Gestational age&quot; ≥ 28 weeks)
  AND (&quot;Population prevalence of anaemia&quot; ≤ 20%)
  AND (&quot;Has side-effects from iron and folic acid supplements&quot; = TRUE)))
  OR ((&quot;Blood haemoglobin test result&quot; ≥ 105 g/L)
  AND (13 weeks ≤ &quot;Gestational age&quot; ≤ 27 weeks)
  AND (&quot;Population prevalence of anaemia&quot; ≤ 20%)
  AND (&quot;Has side-effects from iron and folic acid supplements&quot; = TRUE)))
  OR ((&quot;Blood haemoglobin test conducted&quot; = FALSE)
  AND (&quot;Pallor present&quot; = FALSE)
  AND (&quot;Population prevalence of anaemia&quot; ≤ 20%)
  AND (&quot;Has side-effects from iron and folic acid supplements&quot; = TRUE))
                                        
                                        <i>(Should \&quot;Anaemia counselling conducted\&quot; IS OPTIONAL 2)</i>
                                        <br/>
                                        
                                        
                                        
                                        <b>Then:</b> <i>Additional sub-actions not displayed</i>
                                        
                                    </td>
                                </tr>
                                
                                <tr>
                                    <td>
                                        
                                        If a woman is not diagnosed for anaemia, iron and folic acid supplementation is still recommended. 

If daily iron is not acceptable due to side-effects, provide intermittent iron and folic acid supplementation instead (120 mg of elemental iron and 2.8 mg of folic acid once weekly).

The equivalent of 120 mg of elemental iron is 600 mg of ferrous sulfate heptahydrate, 360 mg of ferrous fumarate or 1000 mg of ferrous gluconate.

Please refer to iron sources listed below for additional guidance that can be provided. 
                                        
                                        <br/>
                                        
                                        
                                        <b>If:</b>
                                        
                                        <i>Applicability:</i>
                                        
                                        ((((&quot;Blood haemoglobin test result&quot; ≥ 110 g/L)
  AND (&quot;Gestational age&quot; ≤ 12 weeks)
  AND (&quot;Population prevalence of anaemia&quot; ≤ 20%)
  AND (&quot;Has side-effects from iron and folic acid supplements&quot; = FALSE))
  OR ((&quot;Blood haemoglobin test result&quot; ≥ 110 g/L)
  AND (&quot;Gestational age&quot; ≥ 28 weeks)
  AND (&quot;Population prevalence of anaemia&quot; ≤ 20%)
  AND (&quot;Has side-effects from iron and folic acid supplements&quot; = FALSE)))
  OR ((&quot;Blood haemoglobin test result&quot; ≥ 105 g/L)
  AND (13 weeks ≤ &quot;Gestational age&quot; ≤ 27 weeks)
  AND (&quot;Population prevalence of anaemia&quot; ≤ 20%)
  AND (&quot;Has side-effects from iron and folic acid supplements&quot; = FALSE)))
  OR ((&quot;Blood haemoglobin test conducted&quot; = FALSE)
  AND (&quot;Pallor present&quot; = FALSE)
  AND (&quot;Population prevalence of anaemia&quot; ≤ 20%)
  AND (&quot;Has side-effects from iron and folic acid supplements&quot; = FALSE))
                                        
                                        <i>(Should \&quot;Anaemia counselling conducted\&quot; IS OPTIONAL 3)</i>
                                        <br/>
                                        
                                        
                                        
                                        <b>Then:</b> <i>Additional sub-actions not displayed</i>
                                        
                                    </td>
                                </tr>
                                
                            </table>
                            
                        </td>
                    </tr>
                    
                </table>
            </td>
        </tr>
        
    </table>
</div>
</div>
  </text>
  <contained>
    <Library>
      <id value="effective-data-requirements"/>
      <name value="EffectiveDataRequirements"/>
      <status value="active"/>
      <type>
        <coding>
          <system value="http://terminology.hl7.org/CodeSystem/library-type"/>
          <code value="module-definition"/>
        </coding>
      </type>
      <relatedArtifact>
        <type value="depends-on"/>
        <display value="Library FHIRHelpers"/>
        <resource value="http://smart.who.int/anc/Library/FHIRHelpers|4.0.1"/>
      </relatedArtifact>
      <relatedArtifact>
        <type value="depends-on"/>
        <display value="Library ContactData"/>
        <resource value="http://smart.who.int/anc/Library/ANCContactDataElements"/>
      </relatedArtifact>
      <relatedArtifact>
        <type value="depends-on"/>
        <display value="Library WC"/>
        <resource value="http://smart.who.int/anc/Library/WHOCommon"/>
      </relatedArtifact>
      <relatedArtifact>
        <type value="depends-on"/>
        <display value="Library Cx"/>
        <resource value="http://smart.who.int/anc/Library/ANCConcepts"/>
      </relatedArtifact>
      <relatedArtifact>
        <type value="depends-on"/>
        <display value="Value set Gestational age"/>
        <resource value="http://smart.who.int/anc/ValueSet/anc-b6-de17"/>
      </relatedArtifact>
      <relatedArtifact>
        <type value="depends-on"/>
        <display value="Value set Blood haemoglobin test result"/>
        <resource value="http://smart.who.int/anc/ValueSet/anc-b9-de186"/>
      </relatedArtifact>
      <relatedArtifact>
        <type value="depends-on"/>
        <display value="Value set Pallor present"/>
        <resource value="http://smart.who.int/anc/ValueSet/anc-b8-de38"/>
      </relatedArtifact>
      <parameter>
        <name value="encounter"/>
        <use value="in"/>
        <min value="0"/>
        <max value="1"/>
        <type value="string"/>
      </parameter>
      <parameter>
        <name value="Should Conduct REQUIRED anaemia counselling"/>
        <use value="out"/>
        <min value="0"/>
        <max value="1"/>
        <type value="boolean"/>
      </parameter>
      <dataRequirement>
        <type value="Observation"/>
        <profile value="http://hl7.org/fhir/StructureDefinition/Observation"/>
        <mustSupport value="code"/>
        <mustSupport value="status"/>
        <mustSupport value="encounter"/>
        <mustSupport value="encounter.reference"/>
        <codeFilter>
          <path value="code"/>
          <valueSet value="http://smart.who.int/anc/ValueSet/anc-b6-de17"/>
        </codeFilter>
      </dataRequirement>
      <dataRequirement>
        <type value="Observation"/>
        <profile value="http://hl7.org/fhir/StructureDefinition/Observation"/>
        <mustSupport value="code"/>
        <mustSupport value="status"/>
        <mustSupport value="encounter"/>
        <mustSupport value="encounter.reference"/>
        <codeFilter>
          <path value="code"/>
          <valueSet value="http://smart.who.int/anc/ValueSet/anc-b9-de186"/>
        </codeFilter>
      </dataRequirement>
      <dataRequirement>
        <type value="Observation"/>
        <profile value="http://hl7.org/fhir/StructureDefinition/Observation"/>
        <mustSupport value="code"/>
        <mustSupport value="status"/>
        <mustSupport value="encounter"/>
        <mustSupport value="encounter.reference"/>
        <codeFilter>
          <path value="code"/>
          <valueSet value="http://smart.who.int/anc/ValueSet/anc-b8-de38"/>
        </codeFilter>
      </dataRequirement>
    </Library>
  </contained>
  <extension url="http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition">
    <extension url="libraryName">
      <valueString value="ANCContactDataElements"/>
    </extension>
    <extension url="name">
      <valueString value="Gestational age"/>
    </extension>
    <extension url="statement">
      <valueString value="/*&#xA;  @dataElement: ANC.B6.DE17 Gestational age&#xA;  @activity: ANC.B6 Profile&#xA;  @description: Gestational age in weeks and/or days depending on the source of gestational age&#xA;*/&#xA;define &quot;Gestational age&quot;:&#xA;  WC.MostRecent(&#xA;  [Observation: Cx.&quot;Gestational age&quot;] O&#xA;    where O.status in { 'final', 'amended', 'corrected' }&#xA;      and Coalesce(WC.ModifierExtension(O, 'who-notDone').value, false) is false&#xA;      and Last(Split(O.encounter.reference, '/')) = Last(Split(encounter, '/'))&#xA;  ).value as FHIR.Quantity"/>
    </extension>
    <extension url="displaySequence">
      <valueInteger value="0"/>
    </extension>
  </extension>
  <extension url="http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition">
    <extension url="libraryName">
      <valueString value="ANCContactDataElements"/>
    </extension>
    <extension url="name">
      <valueString value="Blood haemoglobin test result"/>
    </extension>
    <extension url="statement">
      <valueString value="/*&#xA;  @dataElement: ANC.B9.DE186 Blood haemoglobin test result&#xA;  @activity: ANC.B9 Lab tests &amp; imaging&#xA;  @description: Blood haemoglobin test result in g/dl&#xA;*/&#xA;define &quot;Blood haemoglobin test result&quot;:&#xA;  WC.Only(&#xA;  [Observation: Cx.&quot;Blood haemoglobin test result&quot;] O&#xA;    where O.status in { 'final', 'amended', 'corrected' }&#xA;      and Coalesce(WC.ModifierExtension(O, 'who-notDone').value, false) is false&#xA;      and Last(Split(O.encounter.reference, '/')) = Last(Split(encounter, '/'))&#xA;  ).value as FHIR.Quantity"/>
    </extension>
    <extension url="displaySequence">
      <valueInteger value="1"/>
    </extension>
  </extension>
  <extension url="http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition">
    <extension url="libraryName">
      <valueString value="ANCContactDataElements"/>
    </extension>
    <extension url="name">
      <valueString value="Pallor present"/>
    </extension>
    <extension url="statement">
      <valueString value="/*&#xA;  @dataElement: ANC.B8.DE38 Pallor present&#xA;  @activity: ANC.B8 Physical exam&#xA;  @description: Whether or not the woman has pallor&#xA;*/&#xA;define &quot;Pallor present&quot;:&#xA;  WC.Only(&#xA;  [Observation: Cx.&quot;Pallor present&quot;] O&#xA;    where O.status in { 'final', 'amended', 'corrected' }&#xA;      and Coalesce(WC.ModifierExtension(O, 'who-notDone').value, false) is false&#xA;      and Last(Split(O.encounter.reference, '/')) = Last(Split(encounter, '/'))&#xA;  ).value as FHIR.boolean"/>
    </extension>
    <extension url="displaySequence">
      <valueInteger value="2"/>
    </extension>
  </extension>
  <extension url="http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition">
    <extension url="libraryName">
      <valueString value="ANCDT25"/>
    </extension>
    <extension url="name">
      <valueString value="Should Conduct REQUIRED anaemia counselling"/>
    </extension>
    <extension url="statement">
      <valueString value="/*&#xA;((((&quot;Blood haemoglobin test result&quot; &lt; 110 g/L)&#xA;  AND (&quot;Gestational age&quot; ≤ 12 weeks))&#xA;  OR ((&quot;Blood haemoglobin test result&quot; &lt; 110 g/L)&#xA;  AND (&quot;Gestational age&quot; ≥ 28 weeks)))&#xA;  OR ((&quot;Blood haemoglobin test result&quot; &lt; 105 g/L)&#xA;  AND (13 weeks ≤ &quot;Gestational age&quot; ≤ 27 weeks)))&#xA;  OR ((&quot;Blood haemoglobin test conducted&quot; = FALSE)&#xA;  AND (&quot;Pallor present&quot; = TRUE))&#xA;*/&#xA;define &quot;Should Conduct REQUIRED anaemia counselling&quot;:&#xA;  (&#xA;    ContactData.&quot;Gestational age&quot; &lt;= 12 'weeks'&#xA;      and ContactData.&quot;Blood haemoglobin test result&quot; &lt; 110 'g/L'&#xA;  ) or&#xA;  (&#xA;    ContactData.&quot;Gestational age&quot; &gt;= 28 'weeks'&#xA;      and ContactData.&quot;Blood haemoglobin test result&quot; &lt; 110 'g/L'&#xA;  ) or&#xA;  (&#xA;    ContactData.&quot;Gestational age&quot; in Interval[13 'weeks', 27 'weeks']&#xA;      and ContactData.&quot;Blood haemoglobin test result&quot; &lt; 105 'g/L'&#xA;  ) or&#xA;  (&#xA;    ContactData.&quot;Blood haemoglobin test result&quot; is null&#xA;      and ContactData.&quot;Pallor present&quot; is true&#xA;  )"/>
    </extension>
    <extension url="displaySequence">
      <valueInteger value="3"/>
    </extension>
  </extension>
  <extension url="http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition">
    <extension url="libraryName">
      <valueString value="FHIRHelpers"/>
    </extension>
    <extension url="name">
      <valueString value="ToQuantity"/>
    </extension>
    <extension url="statement">
      <valueString value="define function ToQuantity(quantity FHIR.Quantity):&#xA;    case&#xA;        when quantity is null then null&#xA;        when quantity.value is null then null&#xA;        when quantity.comparator is not null then&#xA;            Message(null, true, 'FHIRHelpers.ToQuantity.ComparatorQuantityNotSupported', 'Error', 'FHIR Quantity value has a comparator and cannot be converted to a System.Quantity value.')&#xA;        when quantity.system is null or quantity.system.value = 'http://unitsofmeasure.org'&#xA;              or quantity.system.value = 'http://hl7.org/fhirpath/CodeSystem/calendar-units' then&#xA;            System.Quantity { value: quantity.value.value, unit: ToCalendarUnit(Coalesce(quantity.code.value, quantity.unit.value, '1')) }&#xA;        else&#xA;            Message(null, true, 'FHIRHelpers.ToQuantity.InvalidFHIRQuantity', 'Error', 'Invalid FHIR Quantity code: ' &amp; quantity.unit.value &amp; ' (' &amp; quantity.system.value &amp; '|' &amp; quantity.code.value &amp; ')')&#xA;    end"/>
    </extension>
    <extension url="displaySequence">
      <valueInteger value="4"/>
    </extension>
  </extension>
  <extension url="http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition">
    <extension url="libraryName">
      <valueString value="FHIRHelpers"/>
    </extension>
    <extension url="name">
      <valueString value="ToCalendarUnit"/>
    </extension>
    <extension url="statement">
      <valueString value="define function ToCalendarUnit(unit System.String):&#xA;    case unit&#xA;        when 'ms' then 'millisecond'&#xA;        when 's' then 'second'&#xA;        when 'min' then 'minute'&#xA;        when 'h' then 'hour'&#xA;        when 'd' then 'day'&#xA;        when 'wk' then 'week'&#xA;        when 'mo' then 'month'&#xA;        when 'a' then 'year'&#xA;        else unit&#xA;    end"/>
    </extension>
    <extension url="displaySequence">
      <valueInteger value="5"/>
    </extension>
  </extension>
  <extension url="http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition">
    <extension url="libraryName">
      <valueString value="WHOCommon"/>
    </extension>
    <extension url="name">
      <valueString value="MostRecent"/>
    </extension>
    <extension url="statement">
      <valueString value="define function MostRecent(observations List&lt;Observation&gt;):&#xA;  Last(&#xA;    observations O&#xA;      sort by issued&#xA;  )"/>
    </extension>
    <extension url="displaySequence">
      <valueInteger value="6"/>
    </extension>
  </extension>
  <extension url="http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition">
    <extension url="libraryName">
      <valueString value="FHIRHelpers"/>
    </extension>
    <extension url="name">
      <valueString value="ToString"/>
    </extension>
    <extension url="statement">
      <valueString value="define function ToString(value ObservationStatus): value.value"/>
    </extension>
    <extension url="displaySequence">
      <valueInteger value="7"/>
    </extension>
  </extension>
  <extension url="http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition">
    <extension url="libraryName">
      <valueString value="FHIRHelpers"/>
    </extension>
    <extension url="name">
      <valueString value="ToBoolean"/>
    </extension>
    <extension url="statement">
      <valueString value="define function ToBoolean(value boolean): value.value"/>
    </extension>
    <extension url="displaySequence">
      <valueInteger value="8"/>
    </extension>
  </extension>
  <extension url="http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition">
    <extension url="libraryName">
      <valueString value="WHOCommon"/>
    </extension>
    <extension url="name">
      <valueString value="ModifierExtension"/>
    </extension>
    <extension url="statement">
      <valueString value="/*&#xA;@description: Returns the single WHO core modifier extension (if present) on the given resource with the specified id.&#xA;@comment: This function uses singleton from to ensure that a run-time exception is thrown if there&#xA;is more than one extension on the given resource with the specified url.&#xA;*/&#xA;define function ModifierExtension(domainResource DomainResource, id String):&#xA;  singleton from ModifierExtensions(domainResource, id)"/>
    </extension>
    <extension url="displaySequence">
      <valueInteger value="9"/>
    </extension>
  </extension>
  <extension url="http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition">
    <extension url="libraryName">
      <valueString value="WHOCommon"/>
    </extension>
    <extension url="name">
      <valueString value="ModifierExtensions"/>
    </extension>
    <extension url="statement">
      <valueString value="/*&#xA;@description: Returns any WHO core modifier extensions defined on the given resource with the specified id.&#xA;@comment: NOTE: Extensions are not the preferred approach, but are used as a way to access&#xA;content that is defined by extensions but not yet surfaced in the&#xA;CQL model info.&#xA;*/&#xA;define function ModifierExtensions(domainResource DomainResource, id String):&#xA;  domainResource.modifierExtension E&#xA;&#x9;  where E.url = ('http://fhir.org/guides/who/core/StructureDefinition/' + id)&#xA;&#x9;&#x9;return E"/>
    </extension>
    <extension url="displaySequence">
      <valueInteger value="10"/>
    </extension>
  </extension>
  <extension url="http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition">
    <extension url="libraryName">
      <valueString value="FHIRHelpers"/>
    </extension>
    <extension url="name">
      <valueString value="ToString"/>
    </extension>
    <extension url="statement">
      <valueString value="define function ToString(value uri): value.value"/>
    </extension>
    <extension url="displaySequence">
      <valueInteger value="11"/>
    </extension>
  </extension>
  <extension url="http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition">
    <extension url="libraryName">
      <valueString value="FHIRHelpers"/>
    </extension>
    <extension url="name">
      <valueString value="ToString"/>
    </extension>
    <extension url="statement">
      <valueString value="define function ToString(value string): value.value"/>
    </extension>
    <extension url="displaySequence">
      <valueInteger value="12"/>
    </extension>
  </extension>
  <extension url="http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition">
    <extension url="libraryName">
      <valueString value="WHOCommon"/>
    </extension>
    <extension url="name">
      <valueString value="Only"/>
    </extension>
    <extension url="statement">
      <valueString value="define function Only(observations List&lt;Observation&gt;):&#xA;  singleton from observations"/>
    </extension>
    <extension url="displaySequence">
      <valueInteger value="13"/>
    </extension>
  </extension>
  <extension id="effective-data-requirements" url="http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-effectiveDataRequirements">
    <valueCanonical value="#effective-data-requirements"/>
  </extension>
  <extension url="http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-softwaresystem">
    <valueReference>
      <reference value="Device/cqf-tooling"/>
    </valueReference>
  </extension>
  <url value="http://smart.who.int/anc/PlanDefinition/ANCDT25"/>
  <identifier>
    <use value="official"/>
    <value value="ANC.DT.25"/>
  </identifier>
  <version value="0.3.0"/>
  <name value="ANCDT25"/>
  <title value="ANC.DT.25 Anaemia, iron and folic acid supplementation"/>
  <type>
    <coding>
      <system value="http://terminology.hl7.org/CodeSystem/plan-definition-type"/>
      <code value="eca-rule"/>
    </coding>
  </type>
  <status value="active"/>
  <experimental value="false"/>
  <date value="2025-06-24T13:58:48-06:00"/>
  <publisher value="World Health Organization (WHO)"/>
  <contact>
    <telecom>
      <system value="url"/>
      <value value="https://www.who.int"/>
    </telecom>
  </contact>
  <description value="Testing for anaemia is recommended for all pregnant women. Regardless of test results, iron and folic acid supplementation is recommended. The amount of iron and folic acid supplementation will vary depending on anaemia diagnosis, population prevalence of anaemia, and whether the woman has side-effects due to iron and folic acid supplementation."/>
  <useContext>
    <code>
      <system value="http://terminology.hl7.org/CodeSystem/usage-context-type"/>
      <code value="task"/>
      <display value="Workflow Task"/>
    </code>
    <valueCodeableConcept>
      <coding>
        <system value="http://smart.who.int/anc/CodeSystem/activity-codes"/>
        <code value="ANC.B9."/>
        <display value="Conduct laboratory tests and imaging"/>
      </coding>
    </valueCodeableConcept>
  </useContext>
  <jurisdiction>
    <coding>
      <system value="http://unstats.un.org/unsd/methods/m49/m49.htm"/>
      <code value="001"/>
    </coding>
  </jurisdiction>
  <library value="http://smart.who.int/anc/Library/ANCDT25"/>
  <action>
    <title value="ANC.DT.25 Anaemia, iron and folic acid supplementation"/>
    <trigger>
      <type value="named-event"/>
      <name value="ANC.B9. Conduct laboratory tests and imaging"/>
    </trigger>
    <action id="1">
      <title value="Conduct REQUIRED anaemia counselling"/>
      <description value="Conduct REQUIRED anaemia counselling"/>
      <textEquivalent value="Anaemia can be diagnosed if Hb level is less than 11 in first or third trimester or Hb level less than 10.5 in second trimester; OR there is no Hb test result recorded, but woman has pallor.&#xA;&#xA;If a woman is diagnosed with anaemia during pregnancy, conduct counselling for managing and treating anaemia. &#xA;&#xA;Her daily elemental iron should be increased to 120 mg until her haemoglobin (Hb) concentration rises to normal (Hb 110 g/L or higher). Thereafter, she can resume the standard daily antenatal iron dose to prevent recurrence of anaemia.&#xA;&#xA;The equivalent of 120 mg of elemental iron equals 600 mg of ferrous sulfate heptahydrate, 360 mg of ferrous fumarate or 1000 mg of ferrous gluconate.&#xA;&#xA;Please refer to iron sources listed below for additional guidance that can be provided. "/>
      <documentation>
        <type value="citation"/>
        <label value="WHO ANC recommendations (2016): B1.1, A.2.1, A.2.2 (3)&#xA;Pregnancy, childbirth, postpartum and newborn care guide (2015): C4 (1)"/>
      </documentation>
      <condition>
        <kind value="applicability"/>
        <expression>
          <description value="((((&quot;Blood haemoglobin test result&quot; &lt; 110 g/L)&#xA;  AND (&quot;Gestational age&quot; ≤ 12 weeks))&#xA;  OR ((&quot;Blood haemoglobin test result&quot; &lt; 110 g/L)&#xA;  AND (&quot;Gestational age&quot; ≥ 28 weeks)))&#xA;  OR ((&quot;Blood haemoglobin test result&quot; &lt; 105 g/L)&#xA;  AND (13 weeks ≤ &quot;Gestational age&quot; ≤ 27 weeks)))&#xA;  OR ((&quot;Blood haemoglobin test conducted&quot; = FALSE)&#xA;  AND (&quot;Pallor present&quot; = TRUE))"/>
          <language value="text/cql-identifier"/>
          <expression value="Should Conduct REQUIRED anaemia counselling"/>
        </expression>
      </condition>
      <action>
        <title value="Conduct REQUIRED anaemia counselling"/>
      </action>
      <action>
        <title value="&quot;Amount of iron prescribed&quot; = 120 mg"/>
      </action>
      <action>
        <title value="&quot;Type of iron supplement dosage provided&quot; = &quot;Daily&quot;"/>
      </action>
      <action>
        <title value="&quot;Amount of daily dose of folic acid prescribed&quot; = 0.4 mg"/>
      </action>
    </action>
    <action id="2">
      <title value="&quot;Anaemia counselling conducted&quot; IS OPTIONAL"/>
      <description value="&quot;Anaemia counselling conducted&quot; IS OPTIONAL"/>
      <textEquivalent value="If a woman is not diagnosed for anaemia, iron and folic acid supplementation is still recommended. &#xA;&#xA;Due to the population's high anaemia prevalence, a daily dose of 60 mg of elemental iron is preferred over a lower dose. A daily dose of 400 micrograms (0.4 mg) folic acid is also recommended.&#xA;&#xA;The equivalent of 60 mg of elemental iron is 300 mg of ferrous sulfate heptahydrate, 180 mg of ferrous fumarate or 500 mg of ferrous gluconate.&#xA;&#xA;Please refer to iron sources listed below for additional guidance that can be provided. "/>
      <documentation>
        <type value="citation"/>
        <label value="WHO ANC recommendations (2016): B.1.1. Anaemia (3)&#xA;WHO ANC recommendations (2016): A.2.1. Daily iron and folic acid supplements (3)"/>
      </documentation>
      <condition>
        <kind value="applicability"/>
        <expression>
          <description value="((((&quot;Blood haemoglobin test result&quot; ≥ 110 g/L)&#xA;  AND (&quot;Gestational age&quot; ≤ 12 weeks)&#xA;  AND (&quot;Population prevalence of anaemia&quot; ≥ 40%))&#xA;  OR ((&quot;Blood haemoglobin test result&quot; ≥ 110 g/L)&#xA;  AND (&quot;Gestational age&quot; ≥ 28 weeks)&#xA;  AND (&quot;Population prevalence of anaemia&quot; ≥ 40%)))&#xA;  OR ((&quot;Blood haemoglobin test result&quot; ≥ 105 g/L)&#xA;  AND (13 weeks ≤ &quot;Gestational age&quot; ≤ 27 weeks)&#xA;  AND (&quot;Population prevalence of anaemia&quot; ≥ 40%)))&#xA;  OR ((&quot;Blood haemoglobin test conducted&quot; = FALSE)&#xA;  AND (&quot;Pallor present&quot; = FALSE)&#xA;  AND (&quot;Population prevalence of anaemia&quot; ≥ 40%))"/>
          <language value="text/cql-identifier"/>
          <expression value="Should \&quot;Anaemia counselling conducted\&quot; IS OPTIONAL"/>
        </expression>
      </condition>
      <action>
        <title value="&quot;Anaemia counselling conducted&quot; IS OPTIONAL"/>
      </action>
      <action>
        <title value="&quot;Amount of iron prescribed&quot; = 60 mg"/>
      </action>
      <action>
        <title value="&quot;Type of iron supplement dosage provided&quot; = &quot;Daily&quot;"/>
      </action>
      <action>
        <title value="&quot;Amount of daily dose of folic acid prescribed&quot; = 0.4 mg"/>
      </action>
    </action>
    <action id="3">
      <title value="&quot;Anaemia counselling conducted&quot; IS OPTIONAL"/>
      <description value="&quot;Anaemia counselling conducted&quot; IS OPTIONAL 2"/>
      <textEquivalent value="If a woman is not diagnosed for anaemia, iron and folic acid supplementation is still recommended. &#xA;&#xA;Daily oral iron and folic acid supplementation with 30–60 mg of elemental iron and 400 micrograms (0.4 mg) of folic acidc to prevent maternal anaemia, puerperal sepsis, low birth weight and preterm birth.&#xA;&#xA;The equivalent of 60 mg of elemental iron is 300 mg of ferrous sulfate hepahydrate, 180 mg of ferrous fumarate or 500 mg of ferrous gluconate.&#xA;&#xA;Please refer to iron sources listed below for additional guidance that can be provided. "/>
      <documentation>
        <type value="citation"/>
        <label value="WHO ANC recommendations (2016): B.1.1. Anaemia (3)&#xA;WHO ANC recommendations (2016): A.2.1. Daily iron and folic acid supplements (3)"/>
      </documentation>
      <condition>
        <kind value="applicability"/>
        <expression>
          <description value="((((&quot;Blood haemoglobin test result&quot; ≥ 110 g/L)&#xA;  AND (&quot;Gestational age&quot; ≤ 12 weeks)&#xA;  AND (&quot;Population prevalence of anaemia&quot; ≤ 20%)&#xA;  AND (&quot;Has side-effects from iron and folic acid supplements&quot; = TRUE))&#xA;  OR ((&quot;Blood haemoglobin test result&quot; ≥ 110 g/L)&#xA;  AND (&quot;Gestational age&quot; ≥ 28 weeks)&#xA;  AND (&quot;Population prevalence of anaemia&quot; ≤ 20%)&#xA;  AND (&quot;Has side-effects from iron and folic acid supplements&quot; = TRUE)))&#xA;  OR ((&quot;Blood haemoglobin test result&quot; ≥ 105 g/L)&#xA;  AND (13 weeks ≤ &quot;Gestational age&quot; ≤ 27 weeks)&#xA;  AND (&quot;Population prevalence of anaemia&quot; ≤ 20%)&#xA;  AND (&quot;Has side-effects from iron and folic acid supplements&quot; = TRUE)))&#xA;  OR ((&quot;Blood haemoglobin test conducted&quot; = FALSE)&#xA;  AND (&quot;Pallor present&quot; = FALSE)&#xA;  AND (&quot;Population prevalence of anaemia&quot; ≤ 20%)&#xA;  AND (&quot;Has side-effects from iron and folic acid supplements&quot; = TRUE))"/>
          <language value="text/cql-identifier"/>
          <expression value="Should \&quot;Anaemia counselling conducted\&quot; IS OPTIONAL 2"/>
        </expression>
      </condition>
      <action>
        <title value="&quot;Anaemia counselling conducted&quot; IS OPTIONAL"/>
      </action>
      <action>
        <title value="30 mg ≤ &quot;Amount of iron prescribed&quot; ≤ 60 mg"/>
      </action>
      <action>
        <title value="&quot;Type of iron supplement dosage provided&quot; = &quot;Daily&quot;"/>
      </action>
      <action>
        <title value="&quot;Amount of daily dose of folic acid prescribed&quot; = 0.4 mg"/>
      </action>
    </action>
    <action id="4">
      <title value="&quot;Anaemia counselling conducted&quot; IS OPTIONAL"/>
      <description value="&quot;Anaemia counselling conducted&quot; IS OPTIONAL 3"/>
      <textEquivalent value="If a woman is not diagnosed for anaemia, iron and folic acid supplementation is still recommended. &#xA;&#xA;If daily iron is not acceptable due to side-effects, provide intermittent iron and folic acid supplementation instead (120 mg of elemental iron and 2.8 mg of folic acid once weekly).&#xA;&#xA;The equivalent of 120 mg of elemental iron is 600 mg of ferrous sulfate heptahydrate, 360 mg of ferrous fumarate or 1000 mg of ferrous gluconate.&#xA;&#xA;Please refer to iron sources listed below for additional guidance that can be provided. "/>
      <documentation>
        <type value="citation"/>
        <label value="WHO ANC recommendations (2016): B.1.1. Anaemia (3)&#xA;WHO ANC recommendations (2016): A.2.2. Intermittent iron and folic acid supplements (3)"/>
      </documentation>
      <condition>
        <kind value="applicability"/>
        <expression>
          <description value="((((&quot;Blood haemoglobin test result&quot; ≥ 110 g/L)&#xA;  AND (&quot;Gestational age&quot; ≤ 12 weeks)&#xA;  AND (&quot;Population prevalence of anaemia&quot; ≤ 20%)&#xA;  AND (&quot;Has side-effects from iron and folic acid supplements&quot; = FALSE))&#xA;  OR ((&quot;Blood haemoglobin test result&quot; ≥ 110 g/L)&#xA;  AND (&quot;Gestational age&quot; ≥ 28 weeks)&#xA;  AND (&quot;Population prevalence of anaemia&quot; ≤ 20%)&#xA;  AND (&quot;Has side-effects from iron and folic acid supplements&quot; = FALSE)))&#xA;  OR ((&quot;Blood haemoglobin test result&quot; ≥ 105 g/L)&#xA;  AND (13 weeks ≤ &quot;Gestational age&quot; ≤ 27 weeks)&#xA;  AND (&quot;Population prevalence of anaemia&quot; ≤ 20%)&#xA;  AND (&quot;Has side-effects from iron and folic acid supplements&quot; = FALSE)))&#xA;  OR ((&quot;Blood haemoglobin test conducted&quot; = FALSE)&#xA;  AND (&quot;Pallor present&quot; = FALSE)&#xA;  AND (&quot;Population prevalence of anaemia&quot; ≤ 20%)&#xA;  AND (&quot;Has side-effects from iron and folic acid supplements&quot; = FALSE))"/>
          <language value="text/cql-identifier"/>
          <expression value="Should \&quot;Anaemia counselling conducted\&quot; IS OPTIONAL 3"/>
        </expression>
      </condition>
      <action>
        <title value="&quot;Anaemia counselling conducted&quot; IS OPTIONAL"/>
      </action>
      <action>
        <title value="&quot;Amount of iron prescribed&quot; = 120 mg"/>
      </action>
      <action>
        <title value="&quot;Type of iron supplement dosage provided&quot; = &quot;Weekly&quot;"/>
      </action>
      <action>
        <title value="&quot;Amount of weekly dose of folic acid prescribed&quot; = 2.8 mg"/>
      </action>
    </action>
  </action>
</PlanDefinition>